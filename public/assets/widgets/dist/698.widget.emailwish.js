"use strict";(self.webpackChunkemailwish_widgets=self.webpackChunkemailwish_widgets||[]).push([[698],{1431:function(e,r,t){var i=t(3645),i=t.n(i)()(function(e){return e[1]});i.push([e.id,".BYwI0eppzSctM3dnK9dG:hover {\n  cursor: pointer;\n\n}\n.BYwI0eppzSctM3dnK9dG:hover .LGu4OAfPu6DBSdj1jKgW {\n\n  border-bottom: 1px solid #000;\n}",""]),i.locals={ratingItem:"BYwI0eppzSctM3dnK9dG",ratingItemChild:"LGu4OAfPu6DBSdj1jKgW"},r.Z=i},9168:function(e,r,t){t.d(r,{J:function(){return l}});var i=t(9669),o=t.n(i),n=function(){return(n=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},s=function(e,s,a,l){return new(a=a||Promise)(function(t,r){function i(e){try{n(l.next(e))}catch(e){r(e)}}function o(e){try{n(l.throw(e))}catch(e){r(e)}}function n(e){var r;e.done?t(e.value):((r=e.value)instanceof a?r:new a(function(e){e(r)})).then(i,o)}n((l=l.apply(e,s||[])).next())})},a=function(t,i){var o,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:r(0),throw:r(1),return:r(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function r(r){return function(e){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,(r=s?[2&r[0],s.value]:r)[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=i.call(t,a)}catch(e){r=[6,e],n=0}finally{o=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,e])}}},l=function(e){var n=this;this.process_params=function(i,o){for(var e in i)!function(e){var r,t;i.hasOwnProperty(e)&&(r=o?o+"["+e+"]":e,"string"==typeof(e=i[e])?n.flattened_data.push({key:r,value:e}):"number"==typeof e?n.flattened_data.push({key:r,value:e+""}):"boolean"==typeof e?n.flattened_data.push({key:r,value:e?"true":"false"}):void 0===e||(Array.isArray(e)?(t={},e.forEach(function(e,r){return t[r+""]=e})):t=e,n.process_params(t,r)))}(e)},this.get_form_data=function(){return n.flattened_data},this.flattened_data=[],this.process_params(e,"")},i=(d.getErrorString=function(e){return"string"==typeof e?e:e.join(" ")},d.csrfToken={token:"dummy_expired_token",expiry:new Date(0)},d.hasError=function(e){return!e||400<=e.statusCode||(!(e&&!e.validation_errors)||void 0)},d.getError=function(e){return e.message&&"string"==typeof e.message?e.message:e.validation_errors?e.validation_errors.csrf?d.getErrorString(e.validation_errors.csrf):e.validation_errors.network?d.getErrorString(e.validation_errors.network):e.validation_errors.email?d.getErrorString(e.validation_errors.email):e.validation_errors.password?d.getErrorString(e.validation_errors.password):e.validation_errors.name?d.getErrorString(e.validation_errors.name):"Unknown error!":d.getErrorFromStatusCode(e)},d.getErrorFromStatusCode=function(e){switch(e.statusCode){case 400:return"Request error: Bad Request";case 401:return"Request error: Unauthorized";case 402:return"Request error: Payment Required";case 403:return"Request error: Forbidden";case 404:return"Request error: Not Found";case 405:return"Request error: Method Not Allowed";case 500:return"Server error: Internal error";case 501:return"Server error: Not Implemented";case 502:return"Server error: Bad Gateway";case 503:return"Server error: Service Unavailable";case 504:return"Server error: Gateway Timeout";default:return"Unknown error"}},d);function d(){var r=this;this.getApiBaseURL=function(){return"http://builder.emailwish.com"},this.getCsrfToken=function(e){return void 0===e&&(e=!1),s(r,void 0,void 0,function(){return a(this,function(e){return[2,this.fetchCsrfToken().then(function(e){return d.hasError(e)||!e.token?"":e.token})]})})},this.fetchCsrfToken=function(){return o().get(r.getApiBaseURL()+"/_api/v1/csrf-token",{withCredentials:!0}).then(function(e){return n({statusCode:e.status},e.data)}).catch(function(e){})},this.ipLocation=function(){return o().get(r.getApiBaseURL()+"/_api/v1/ip-location",{withCredentials:!0}).then(function(e){return n({statusCode:e.status},e.data)}).catch(function(e){})},this.handleCatch=function(e){return console.log("error"),console.log(e),e&&e.response&&e.response.status&&e.response.data?n(n({},e.response.data),{statusCode:e.response.status}):e instanceof o().Cancel?{statusCode:999,message:void 0}:{statusCode:999,message:"Network Error"}}}r.Z=i},4292:function(e,r,t){var i,o,s=t(9168),n=t(9669),a=t.n(n),n=(i=function(e,r){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=e}i(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),l=function(){return(l=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},d=function(e,s,a,l){return new(a=a||Promise)(function(t,r){function i(e){try{n(l.next(e))}catch(e){r(e)}}function o(e){try{n(l.throw(e))}catch(e){r(e)}}function n(e){var r;e.done?t(e.value):((r=e.value)instanceof a?r:new a(function(e){e(r)})).then(i,o)}n((l=l.apply(e,s||[])).next())})},c=function(t,i){var o,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:r(0),throw:r(1),return:r(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function r(r){return function(e){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,(r=s?[2&r[0],s.value]:r)[0]){case 0:case 1:s=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){a.label=r[1];break}if(6===r[0]&&a.label<s[1]){a.label=s[1],s=r;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(r);break}s[2]&&a.ops.pop(),a.trys.pop();continue}r=i.call(t,a)}catch(e){r=[6,e],n=0}finally{o=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,e])}}},n=(o=s.Z,n(u,o),u);function u(){var e=null!==o&&o.apply(this,arguments)||this;return e.get_summary=function(t,i,o){return d(e,void 0,void 0,function(){var r=this;return c(this,function(e){return[2,a().get(this.getApiBaseURL()+"/_shopify/reviewStats",{headers:{"Content-Type":"application/json"},withCredentials:!0,params:{client_uid:t,product_id:i,shop_name:o}}).then(function(e){return l({statusCode:e.status},e.data)}).catch(function(e){return r.handleCatch(e)})]})})},e.get_all_reviews=function(t,i){return d(e,void 0,void 0,function(){var r=this;return c(this,function(e){return[2,a().get(this.getApiBaseURL()+"/_shopify/embedAllShopifyReviews",{headers:{"Content-Type":"application/json"},withCredentials:!0,params:l(l({},i),{client_uid:t})}).then(function(e){return l({statusCode:e.status},e.data)}).catch(function(e){return r.handleCatch(e)})]})})},e.embedShopifyReviews=function(t,i,o,n){return d(e,void 0,void 0,function(){var r=this;return c(this,function(e){return[2,a().get(this.getApiBaseURL()+"/_shopify/embedShopifyReviews",{headers:{"Content-Type":"application/json"},withCredentials:!0,params:l(l({},n),{client_uid:t,product_id:i,shop_name:o})}).then(function(e){return l({statusCode:e.status},e.data)}).catch(function(e){return r.handleCatch(e)})]})})},e.storeFromReviewer=function(o,n){return d(e,void 0,void 0,function(){var r,t,i=this;return c(this,function(e){if(r=new FormData,new s.J(o).get_form_data().forEach(function(e){r.set(e.key,e.value)}),r.delete("images"),o.images&&0<o.images.length)for(t=0;t<o.images.length;t++)r.set("images["+t+"]",o.images[t]);return[2,a().post(this.getApiBaseURL()+"/_shopify/storeFromReviewer",r,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0,onUploadProgress:n}).then(function(e){return l({statusCode:e.status},e.data)}).catch(function(e){return i.handleCatch(e)})]})})},e}r.Z=n},9698:function(e,r,t){t.r(r),t.d(r,{default:function(){return f},useSummaryStyles:function(){return re}});var w=t(5893),b=t(1437),P=t(7294),C=t(4292),k=t(64),N=t(7657),S=t(8436),o=t(366),i=t(7484),F=t.n(i),B=t(9506),R=t(1505),n=t(3379),s=t.n(n),a=t(7795),l=t.n(a),d=t(569),c=t.n(d),r=t(3565),i=t.n(r),n=t(9216),a=t.n(n),d=t(4589),r=t.n(d),n=t(1431),d={};d.styleTagTransform=r(),d.setAttributes=i(),d.insert=c().bind(null,"head"),d.domAPI=l(),d.insertStyleElement=a();s()(n.Z,d);var O=n.Z&&n.Z.locals?n.Z.locals:void 0,T=t(8623),u=t(6083),E=t(129),I=t(3585),A=t(8830),s=t(1120),V=t(1041),h=t(150),d=t(8920),L=t(9476),m=t(2068),W=t(1012),G=t(3962),D=t(7973),U=t(282),z=t(4436),q=t(6030),M=t(6312),Y=t(8985),K=t(7205),H=t(7004),J=t(727),X=t(1196),Q=t(4986),v=t(3681),n=t(6176),n=t.n(n),$=t(8380),ee=function(){return(ee=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},p=function(e,r){var t={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(t[o[i]]=e[o[i]]);return t};F().extend(n());var re=(0,s.Z)(function(e){return(0,h.Z)({review_root_main:function(e){return{backgroundColor:e.primary_background_color}},review_root:function(e){return{flexGrow:1,width:"100%"}},review_formControl:{margin:e.spacing(1),minWidth:120},addReviewButton:function(e){return{border:"1px solid "+e.primary_text_color,width:"100%"}},dialog_button:function(e){return{backgroundColor:e.secondary_background_color,color:e.secondary_text_color,"&:disabled":{backgroundColor:e.secondary_background_color,color:e.secondary_text_color,opacity:.6},"&:focus":{backgroundColor:e.secondary_background_color,color:e.secondary_text_color},"&:hover":{backgroundColor:e.secondary_background_color,color:e.secondary_text_color}}},dropZone:function(e){return{padding:"20px",backgroundColor:e.primary_background_color,color:e.primary_text_color}},dropZoneImage:function(e){return{width:"20px",backgroundColor:e.primary_background_color,color:e.primary_text_color}},add_dialog_wrapper:function(e){return{backgroundColor:e.primary_background_color,color:e.primary_text_color}},review_button:function(e){return{padding:"14px 28px",letterSpacing:"0.2em",fontSize:"13px",cursor:"pointer",backgroundColor:e.secondary_background_color,color:e.secondary_text_color,borderRadius:"0",textTransform:"uppercase","&:hover":{backgroundColor:e.secondary_background_color,color:e.secondary_text_color}}},review_state_wrapper:function(e){return{borderBottom:"1px solid "+e.secondary_background_color}},review_state_average_score_box:function(e){return{backgroundColor:e.secondary_background_color,color:e.secondary_text_color}},review_state_average_score_box_text:function(e){return{color:e.secondary_text_color}},review_state_rating_text:function(e){return{color:e.primary_text_color}},review_state_rating_wrapper:function(e){return{borderLeft:"1px solid "+e.secondary_background_color}},primary_text_color:function(e){return{color:e.primary_text_color}},dialog_textField:function(e){return{color:e.primary_text_color,backgroundColor:e.primary_background_color}},pagination_ui:function(e){return{"& .Mui-selected":{backgroundColor:"transparent"}}},pagination_ui_selected:function(e){return{color:e.primary_text_color}},primary_text_color_as_bg:function(e){return{backgroundColor:e.primary_text_color}},review_item_wrapper:function(e){return{borderBottom:"1px solid "+e.primary_text_color}}})},{classNamePrefix:"summary",index:1}),te=(0,d.Z)(function(e){return(0,h.Z)({root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})})(function(e){var r=e.children,t=e.classes,i=e.onClose,e=p(e,["children","classes","onClose"]);return(0,w.jsxs)(u.Z,ee({disableTypography:!0,className:t.root},e,{children:[(0,w.jsx)(L.ZP,ee({variant:"h6"},{children:r}),void 0),i?(0,w.jsx)(m.ZP,ee({"aria-label":"close",className:t.closeButton,onClick:i},{children:(0,w.jsx)(o.Z,{},void 0)}),void 0):null]}),void 0)});function f(e){var r=e.ui_testing,t=e.settings,i=(0,P.useContext)(X.ReviewAppStateContext),o=i.meta_data,n=i.review_settings,s=(0,P.useContext)(X.ReviewAppDispatchContext),a=(0,P.useState)(),l=a[0],d=a[1],c=re(t),u=(0,N.Z)(),h=(0,P.useState)({page:1,per_page:10,filter_stars:"0"}),m=h[0],v=h[1],p=(0,P.useState)(),e=p[0],f=p[1],i=P.useState(!1),a=i[0],_=i[1],t=P.useState(!1),h=t[0],x=t[1],p=(0,P.useState)(!1),i=p[0],g=p[1],j=(0,P.useCallback)(function(){o&&(new C.Z).get_summary(o.client_id,o.product_id,o.shop_name).then(function(e){u.current&&(C.Z.hasError(e)||(e.review_settings&&s({type:"review_settings",review_settings:e.review_settings}),d(e)))})},[s,o,u]),t=(0,V.Z)(),p=(0,b.Z)(t.breakpoints.down("sm")),y=(0,P.useCallback)(function(){g(!0),o&&(new C.Z).embedShopifyReviews(o.client_id,o.product_id,o.shop_name,m).then(function(e){u.current&&(C.Z.hasError(e)||(f(e),g(!1)))})},[o,m,u]);(0,P.useEffect)(function(){o&&j()},[j,o]),(0,P.useEffect)(function(){o&&y()},[y,m,o]);function Z(){x(!1)}t=function(){x(!0)};return l&&n?(0,w.jsx)("div",ee({className:c.review_root_main},{children:(0,w.jsxs)(W.ZP,ee({style:{marginTop:"8px"}},{children:[(0,w.jsxs)(G.ZP,ee({className:c.review_root},{children:[l&&(0,w.jsx)(G.ZP,ee({className:c.review_state_wrapper,paddingBottom:1},{children:(0,w.jsxs)(D.ZP,ee({container:!0,spacing:2,justify:"space-between"},{children:[(0,w.jsx)(D.ZP,ee({item:!0,md:6,xs:12},{children:(0,w.jsxs)(D.ZP,ee({container:!0,spacing:1},{children:[(0,w.jsx)(D.ZP,ee({item:!0,xs:12,sm:6,md:6},{children:(0,w.jsxs)(G.ZP,ee({display:"flex"},{children:[(0,w.jsx)(G.ZP,ee({p:1},{children:(0,w.jsx)(G.ZP,ee({p:1,className:c.review_state_average_score_box,borderRadius:"2px"},{children:(0,w.jsx)(L.ZP,ee({className:c.review_state_average_score_box_text},{children:parseFloat(l.average_score.toString()).toFixed(1)}),void 0)}),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({p:1},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",flexDirection:"column"},{children:[(0,w.jsx)(G.ZP,{children:(0,w.jsx)(Q.Z,{star:l.average_score},void 0)},void 0),(0,w.jsx)(G.ZP,{children:(0,w.jsxs)(L.ZP,ee({className:c.review_state_rating_text},{children:["Based on ",l.total_reviews," reviews"]}),void 0)},void 0)]}),void 0)}),void 0)]}),void 0)}),void 0),(0,w.jsx)(D.ZP,ee({item:!0,xs:12,sm:6,md:6},{children:(0,w.jsx)(G.ZP,ee({className:c.review_state_rating_wrapper},{children:(0,w.jsx)(G.ZP,ee({display:"flex",flexDirection:"column"},{children:[l.stars_5,l.stars_4,l.stars_3,l.stars_2,l.stars_1].map(function(e,r){return(0,w.jsxs)(G.ZP,ee({display:"flex",width:"100%",alignItems:"center",p:.5,className:O.ratingItem,onClick:function(){v(function(e){return ee(ee({},e),{filter_stars:(10-(r+5)).toString(),page:1})})}},{children:[(0,w.jsx)(L.ZP,ee({className:O.ratingItemChild+" "+c.primary_text_color},{children:10-(r+5)}),void 0),(0,w.jsx)(k.Z,{className:c.primary_text_color},void 0),(0,w.jsx)(G.ZP,ee({width:"100%",bgcolor:"#eeeeee",m:.5,height:"0.22em",borderRadius:"1.125em"},{children:(0,w.jsx)(G.ZP,{width:100*e/(null==l?void 0:l.total_reviews)+"%",className:c.primary_text_color_as_bg,height:"100%",borderRadius:"1.125em"},void 0)}),void 0),(0,w.jsx)(L.ZP,ee({className:O.ratingItemChild+" "+c.primary_text_color},{children:e}),void 0)]}),r)})}),void 0)}),void 0)}),void 0)]}),void 0)}),void 0),(0,w.jsx)(D.ZP,ee({item:!0,md:6,sm:12},{children:(0,w.jsx)(G.ZP,ee({display:"flex",justifyContent:"flex-end"},{children:(0,w.jsx)(U.Z,ee({className:c.review_button,variant:"contained",color:"primary",onClick:t},{children:"Write a review"}),void 0)}),void 0)}),void 0)]}),void 0)}),void 0),(e&&e.items&&(1<e.items.last_page||0<e.items.data.length)||"0"!==m.filter_stars||r)&&(0,w.jsxs)(G.ZP,ee({marginBottom:2},{children:[(0,w.jsxs)(D.ZP,ee({container:!0,spacing:1},{children:[(0,w.jsx)(D.ZP,ee({item:!0,xs:12},{children:(0,w.jsx)(G.ZP,ee({display:"flex",justifyContent:"flex-end"},{children:(0,w.jsxs)(z.Z,ee({className:c.review_formControl},{children:[(0,w.jsx)(q.ZP,ee({id:"rating-controlled-open-select-label",className:c.primary_text_color},{children:"Rating"}),void 0),(0,w.jsxs)(S.Z,ee({labelId:"rating-controlled-open-select-label",id:"rating-controlled-open-select-label",open:a,onClose:function(){_(!1)},onOpen:function(){_(!0)},value:m.filter_stars,className:c.primary_text_color,onChange:function(r){v(function(e){return ee(ee({},e),{filter_stars:r.target.value,page:1})})}},{children:[(0,w.jsx)(M.ZP,ee({value:"0"},{children:"All"}),void 0),(0,w.jsx)(M.ZP,ee({value:"5"},{children:"5"}),void 0),(0,w.jsx)(M.ZP,ee({value:"4"},{children:"4"}),void 0),(0,w.jsx)(M.ZP,ee({value:"3"},{children:"3"}),void 0),(0,w.jsx)(M.ZP,ee({value:"2"},{children:"2"}),void 0),(0,w.jsx)(M.ZP,ee({value:"1"},{children:"1"}),void 0)]}),void 0)]}),void 0)}),void 0)}),void 0),!i&&e&&e.items&&e.items.data&&0<e.items.data.length&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(D.ZP,ee({item:!0,xs:12},{children:(0,w.jsx)(G.ZP,ee({marginBottom:1},{children:(0,w.jsx)(B.GD,ee({columnsCountBreakPoints:{200:1,350:2,750:3,900:6}},{children:(0,w.jsx)(B.ZP,ee({columnsCount:3,gutter:"10px"},{children:e&&e.items&&e.items.data&&e.items.data.map(function(e,r){return(0,w.jsx)(G.ZP,{children:(0,w.jsx)(G.ZP,ee({className:c.review_item_wrapper},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",flexDirection:"column"},{children:[e.images&&0<e.images.length&&(0,w.jsx)(G.ZP,ee({marginTop:"-1px"},{children:(0,w.jsx)("img",{src:e.images[0].full_path,alt:"Review",style:{width:"100%",height:"auto"}},void 0)}),void 0),(0,w.jsxs)(G.ZP,ee({display:"flex",flexDirection:"column",p:1},{children:[(0,w.jsx)(G.ZP,{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:e.reviewer_name}),void 0)},void 0),(0,w.jsx)(G.ZP,{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:F()(e.created_at).format("L LT")}),void 0)},void 0),(0,w.jsx)(G.ZP,{children:(0,w.jsx)(Q.Z,{star:e.stars},void 0)},void 0),(0,w.jsx)(G.ZP,{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:e.title}),void 0)},void 0),(0,w.jsx)(G.ZP,{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:e.message}),void 0)},void 0)]}),void 0)]}),void 0)}),void 0)},r)})}),void 0)}),void 0)}),void 0)}),void 0),(0,w.jsx)(D.ZP,ee({item:!0,xs:12},{children:(0,w.jsx)(G.ZP,ee({display:"flex",justifyContent:"center"},{children:1<e.items.last_page&&(0,w.jsx)(R.Z,{count:e.items.last_page,page:m.page,className:c.pagination_ui,onChange:function(e,r){v(function(e){return ee(ee({},e),{page:r})})},renderItem:function(e){return(0,w.jsx)($.Z,ee({},e,{classes:{selected:c.pagination_ui_selected}}),void 0)}},void 0)}),void 0)}),void 0)]},void 0)]}),void 0),!i&&e&&e.items&&e.items.data&&0===e.items.data.length&&(0,w.jsxs)(G.ZP,ee({marginBottom:2,display:"flex",alignItems:"center",flexDirection:"column"},{children:[(0,w.jsx)(G.ZP,ee({p:2},{children:(0,w.jsx)(L.ZP,ee({variant:"h5",className:c.primary_text_color},{children:"No reviews found"}),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({p:1},{children:(0,w.jsx)(U.Z,ee({variant:"contained",color:"primary",onClick:function(){v(function(e){return ee(ee({},e),{filter_stars:"0",page:1})})},className:c.review_button},{children:"Show All"}),void 0)}),void 0)]}),void 0)]}),void 0),(!i&&e&&e.items&&!(1<e.items.last_page||0<e.items.data.length)&&"0"===m.filter_stars||r)&&(0,w.jsxs)(G.ZP,ee({marginBottom:2,display:"flex",alignItems:"center",flexDirection:"column"},{children:[(0,w.jsx)(G.ZP,ee({p:2},{children:(0,w.jsx)(L.ZP,ee({variant:"h5",className:c.primary_text_color},{children:"Be the first to write a review"}),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({p:1},{children:(0,w.jsx)(U.Z,ee({className:c.review_button,variant:"contained",color:"primary",onClick:t},{children:"Write a review"}),void 0)}),void 0)]}),void 0)]}),void 0),(0,w.jsx)(T.Z,ee({fullScreen:p,open:h,onClose:Z,maxWidth:"xs",disableBackdropClick:!0,fullWidth:!0},{children:(0,w.jsx)(G.ZP,ee({minWidth:"100%",className:c.add_dialog_wrapper},{children:(0,w.jsx)(E.J9,ee({initialValues:{first_name:"",last_name:"",reviewer_email:"",image:"",stars:"",form_step:"1",title:"",message:"",progress:0,shopify_product_id:o&&o.product_id,shop_name:o&&o.shop_name},onSubmit:function(e,t){r?(t.resetForm(),t.setFieldValue("progress",0),t.setFieldValue("form_step","5"),t.setSubmitting(!1)):(e.reviewer_name=e.first_name+" "+e.last_name,(new C.Z).storeFromReviewer(e,function(e){try{var r=Math.round(e.loaded/e.total*100);t.setFieldValue("progress",r)}catch(e){}}).then(function(e){u.current&&(C.Z.hasError(e)?t.setFieldValue("progress",0):(j(),y(),t.resetForm(),t.setFieldValue("form_step","5")),t.setSubmitting(!1))}))},validationSchema:I.Ry({first_name:I.Z_().required("Please enter first name"),last_name:I.Z_().required("Please enter last name"),image:I.nK(),reviewer_email:I.Z_().email("Please enter valid email").required("Please enter email"),title:I.Z_().required("Please enter title"),message:I.Z_().required("Please enter message")})},{children:function(r){return console.log(r.values),(0,w.jsxs)("form",ee({onSubmit:r.handleSubmit},{children:[!r.isSubmitting&&(0,w.jsxs)(w.Fragment,{children:["1"===r.values.form_step&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,ee({classes:{closeButton:c.dialog_button},id:"customized-dialog-title",onClose:Z},{children:(0,w.jsx)(G.ZP,ee({paddingX:5},{children:(0,w.jsx)(L.ZP,ee({align:"center",className:c.primary_text_color},{children:"HOW WOULD YOU RATE THIS ITEM?"}),void 0)}),void 0)}),void 0),(0,w.jsx)(Y.ZP,{children:(0,w.jsx)(K.Z,ee({in:"1"===r.values.form_step,timeout:600},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",flexDirection:"column",alignItems:"center",padding:1},{children:[(0,w.jsx)(G.ZP,ee({p:1,width:"100%"},{children:(0,w.jsx)(U.Z,ee({className:c.addReviewButton,onClick:function(){r.setFieldValue("stars","5"),r.setFieldValue("form_step","2")}},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",width:"100%",justifyContent:"space-between"},{children:[(0,w.jsx)(Q.Z,{star:5},void 0),(0,w.jsx)(G.ZP,ee({flexGrow:1},{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:"EXCELLENT"}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({p:1,width:"100%"},{children:(0,w.jsx)(U.Z,ee({className:c.addReviewButton,onClick:function(){r.setFieldValue("stars","4"),r.setFieldValue("form_step","2")}},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",width:"100%",justifyContent:"space-between"},{children:[(0,w.jsx)(Q.Z,{star:4},void 0),(0,w.jsx)(G.ZP,ee({flexGrow:1},{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:"JUST WOW"}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({p:1,width:"100%"},{children:(0,w.jsx)(U.Z,ee({className:c.addReviewButton,onClick:function(){r.setFieldValue("stars","3"),r.setFieldValue("form_step","2")}},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",width:"100%",justifyContent:"space-between"},{children:[(0,w.jsx)(Q.Z,{star:3},void 0),(0,w.jsx)(G.ZP,ee({flexGrow:1},{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:"I LIKE IT"}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({p:1,width:"100%"},{children:(0,w.jsx)(U.Z,ee({className:c.addReviewButton,onClick:function(){r.setFieldValue("stars","2"),r.setFieldValue("form_step","2")}},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",width:"100%",justifyContent:"space-between"},{children:[(0,w.jsx)(Q.Z,{star:2},void 0),(0,w.jsx)(G.ZP,ee({flexGrow:1},{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:"I DON'T LIKE IT"}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({p:1,width:"100%"},{children:(0,w.jsx)(U.Z,ee({className:c.addReviewButton,onClick:function(){r.setFieldValue("stars","1"),r.setFieldValue("form_step","2")}},{children:(0,w.jsxs)(G.ZP,ee({display:"flex",width:"100%",justifyContent:"space-between"},{children:[(0,w.jsx)(Q.Z,{star:1},void 0),(0,w.jsx)(G.ZP,ee({flexGrow:1},{children:(0,w.jsx)(L.ZP,ee({align:"center",className:c.primary_text_color},{children:"I HATE IT"}),void 0)}),void 0)]}),void 0)}),void 0)}),void 0)]}),void 0)}),void 0)},void 0),(0,w.jsx)(H.ZP,{children:(0,w.jsx)(U.Z,ee({onClick:Z,className:c.dialog_button},{children:"Close"}),void 0)},void 0)]},void 0),"2"===r.values.form_step&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,ee({classes:{closeButton:c.dialog_button},id:"customized-dialog-title",onClose:Z},{children:(0,w.jsx)(L.ZP,ee({align:"center",className:c.primary_text_color},{children:"SHOW IT OFF"}),void 0)}),void 0),(0,w.jsx)(Y.ZP,ee({style:{height:"100%"}},{children:(0,w.jsx)(K.Z,ee({in:"2"===r.values.form_step,timeout:600},{children:(0,w.jsx)(G.ZP,ee({display:"flex",flexDirection:"column",alignItems:"center"},{children:(0,w.jsx)(G.ZP,{children:(0,w.jsx)(E.F2,ee({name:"images"},{children:function(e){return(0,w.jsx)(A.A0,{dropzoneClass:c.dropZone,acceptedFiles:["image/*"],maxFileSize:1e8,filesLimit:3,onChange:function(e){r.setFieldValue("images",e)},previewGridClasses:{container:c.review_root,image:c.dropZoneImage},previewChipProps:{size:"small",style:{width:"10px"}},previewGridProps:{container:{spacing:2},item:{md:4}},classes:{root:c.review_root},initialFiles:r.values.images},void 0)}}),void 0)},void 0)}),void 0)}),void 0)}),void 0),(0,w.jsx)(H.ZP,{children:(0,w.jsxs)(G.ZP,ee({display:"flex",justifyContent:"space-between",width:"100%"},{children:[(0,w.jsx)(U.Z,ee({className:c.dialog_button,onClick:function(){r.setFieldValue("form_step","1")},color:"primary"},{children:"Back"}),void 0),r.values.images&&0===r.values.images.length&&(0,w.jsx)(U.Z,ee({className:c.dialog_button,onClick:function(){r.setFieldValue("form_step","3")}},{children:"Skip"}),void 0),r.values.images&&0<r.values.images.length&&(0,w.jsx)(U.Z,ee({className:c.dialog_button,onClick:function(){r.setFieldValue("form_step","3")}},{children:"Next"}),void 0)]}),void 0)},void 0)]},void 0),"3"===r.values.form_step&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,ee({classes:{closeButton:c.dialog_button},id:"customized-dialog-title",onClose:Z},{children:(0,w.jsx)(L.ZP,ee({align:"center",className:c.primary_text_color},{children:"TELL US MORE!"}),void 0)}),void 0),(0,w.jsx)(Y.ZP,{children:(0,w.jsx)(K.Z,ee({in:"3"===r.values.form_step,timeout:600},{children:(0,w.jsx)(G.ZP,ee({width:"100%"},{children:(0,w.jsxs)(D.ZP,ee({container:!0,spacing:1},{children:[(0,w.jsx)(D.ZP,ee({item:!0,xs:12},{children:(0,w.jsx)(G.ZP,{children:(0,w.jsx)(J.Z,{placeholder:"Your message title goes here",name:"title",value:r.values.title,onChange:r.handleChange,label:"Title",className:c.dialog_textField,variant:"outlined",fullWidth:!0,helperText:r.touched&&r.touched.title&&r.errors&&r.errors.title,error:r.touched&&r.touched.title&&!(!r.errors||!r.errors.title)},void 0)},void 0)}),void 0),(0,w.jsx)(D.ZP,ee({item:!0,xs:12},{children:(0,w.jsx)(G.ZP,{children:(0,w.jsx)(J.Z,{placeholder:"Your message goes here",name:"message",className:c.dialog_textField,value:r.values.message,onChange:r.handleChange,label:"Message",variant:"outlined",fullWidth:!0,multiline:!0,rows:4,helperText:r.touched&&r.touched.message&&r.errors&&r.errors.message,error:r.touched&&r.touched.message&&!(!r.errors||!r.errors.message)},void 0)},void 0)}),void 0)]}),void 0)}),void 0)}),void 0)},void 0),(0,w.jsx)(H.ZP,{children:(0,w.jsxs)(G.ZP,ee({display:"flex",justifyContent:"space-between",width:"100%"},{children:[(0,w.jsx)(U.Z,ee({className:c.dialog_button,onClick:function(){r.setFieldValue("form_step","2")},color:"primary"},{children:"Back"}),void 0),(0,w.jsx)(U.Z,ee({className:c.dialog_button,color:"primary",onClick:function(){r.setFieldValue("form_step","4")},disabled:!(!r.errors||!r.errors.message)||!(!r.errors||!r.errors.title)},{children:"Next"}),void 0)]}),void 0)},void 0)]},void 0),"4"===r.values.form_step&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,ee({classes:{closeButton:c.dialog_button},id:"customized-dialog-title",onClose:Z},{children:(0,w.jsx)(L.ZP,ee({align:"center",className:c.primary_text_color},{children:"About You"}),void 0)}),void 0),(0,w.jsx)(Y.ZP,{children:(0,w.jsx)(K.Z,ee({in:"4"===r.values.form_step,timeout:600},{children:(0,w.jsxs)(D.ZP,ee({container:!0,spacing:1},{children:[(0,w.jsx)(D.ZP,ee({item:!0,xs:6},{children:(0,w.jsx)(G.ZP,{children:(0,w.jsx)(J.Z,{name:"first_name",className:c.dialog_textField,value:r.values.first_name,onChange:r.handleChange,label:"F.Name",variant:"outlined",fullWidth:!0,helperText:r.touched&&r.touched.first_name&&r.errors&&r.errors.first_name,error:r.touched&&r.touched.first_name&&!(!r.errors||!r.errors.first_name)},void 0)},void 0)}),void 0),(0,w.jsx)(D.ZP,ee({item:!0,xs:6},{children:(0,w.jsx)(G.ZP,{children:(0,w.jsx)(J.Z,{name:"last_name",className:c.dialog_textField,value:r.values.last_name,onChange:r.handleChange,label:"L.Name",variant:"outlined",fullWidth:!0,helperText:r.touched&&r.touched.last_name&&r.errors&&r.errors.last_name,error:r.touched&&r.touched.last_name&&!(!r.errors||!r.errors.last_name)},void 0)},void 0)}),void 0),(0,w.jsx)(D.ZP,ee({item:!0,xs:12},{children:(0,w.jsx)(G.ZP,{children:(0,w.jsx)(J.Z,{name:"reviewer_email",className:c.dialog_textField,value:r.values.reviewer_email,onChange:r.handleChange,label:"Email",variant:"outlined",fullWidth:!0,helperText:r.touched&&r.touched.reviewer_email&&r.errors&&r.errors.reviewer_email,error:r.touched&&r.touched.reviewer_email&&!(!r.errors||!r.errors.reviewer_email)},void 0)},void 0)}),void 0)]}),void 0)}),void 0)},void 0),(0,w.jsx)(H.ZP,{children:(0,w.jsxs)(G.ZP,ee({display:"flex",justifyContent:"space-between",width:"100%"},{children:[(0,w.jsx)(U.Z,ee({onClick:function(){r.setFieldValue("form_step","3")},className:c.dialog_button,color:"primary"},{children:"Back"}),void 0),(0,w.jsx)(U.Z,ee({color:"primary",className:c.dialog_button,type:"submit",disabled:!(!r.errors||!r.errors.first_name)||!(!r.errors||!r.errors.last_name)||!(!r.errors||!r.errors.reviewer_email)},{children:"Submit"}),void 0)]}),void 0)},void 0)]},void 0),"5"===r.values.form_step&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,ee({classes:{closeButton:c.dialog_button},id:"customized-dialog-title",onClose:Z},{children:(0,w.jsx)(L.ZP,ee({align:"center",className:c.primary_text_color},{children:"Thank You"}),void 0)}),void 0),(0,w.jsx)(Y.ZP,{children:(0,w.jsx)(K.Z,ee({in:"5"===r.values.form_step,timeout:600},{children:(0,w.jsx)(G.ZP,ee({paddingY:5},{children:(0,w.jsx)(L.ZP,ee({className:c.primary_text_color},{children:"By submitting, I acknowledge the Privacy Policy and that my review will be publicly posted and shared online"}),void 0)}),void 0)}),void 0)},void 0),(0,w.jsx)(H.ZP,{children:(0,w.jsx)(U.Z,ee({color:"primary",onClick:Z,className:c.dialog_button},{children:"Close"}),void 0)},void 0)]},void 0)]},void 0),r.isSubmitting&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(te,ee({classes:{closeButton:c.dialog_button},id:"customized-dialog-title",onClose:Z},{children:(0,w.jsx)(L.ZP,ee({align:"center"},{children:"Thank you"}),void 0)}),void 0),(0,w.jsx)(Y.ZP,{children:(0,w.jsx)(G.ZP,ee({className:c.review_root,paddingY:5},{children:(0,w.jsx)(ie,{variant:"determinate",value:r.values.progress},void 0)}),void 0)},void 0)]},void 0)]}),void 0)}}),void 0)}),void 0)}),void 0)]}),void 0)}),void 0):null}function ie(e){return(0,w.jsxs)(G.ZP,ee({display:"flex",alignItems:"center"},{children:[(0,w.jsx)(G.ZP,ee({width:"100%",mr:1},{children:(0,w.jsx)(v.Z,ee({variant:"determinate"},e),void 0)}),void 0),(0,w.jsx)(G.ZP,ee({minWidth:35},{children:(0,w.jsx)(L.ZP,ee({variant:"body2",color:"textSecondary"},{children:Math.round(e.value)+"%"}),void 0)}),void 0)]}),void 0)}},4986:function(e,r,t){var i=t(5893),o=t(9503),n=function(){return(n=Object.assign||function(e){for(var r,t=1,i=arguments.length;t<i;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)};r.Z=function(e){return e=e.star,(0,i.jsx)("div",n({className:"d-inline"},{children:(0,i.jsx)(o.Z,{rating:parseFloat(e.toString()),starRatedColor:"orange",numberOfStars:5,name:"rating",isAggregateRating:!0,starDimension:"20px",starSpacing:"4px"},void 0)}),void 0)}}}]);